



<!DOCTYPE html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="RXJS文档">
      
      
      
        <meta name="author" content="Nosy">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.0">
    
    
      
        <title>Subject(主体) - RXJS文档</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.78aab2dc.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="RXJS文档" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                RXJS文档
              </span>
              <span class="md-header-nav__topic">
                Subject(主体)
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/wohugb/rxjs-docs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/rxjs-docs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="前言" class="md-tabs__link">
        前言
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../ReactiveX/intro/" title="响应式" class="md-tabs__link">
          响应式
        </a>
      
    </li>
  

      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../tutorial/basics/" title="教程" class="md-tabs__link">
          教程
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../observable/" title="概念" class="md-tabs__link md-tabs__link--active">
          概念
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../pipeable-operators/" title="高级" class="md-tabs__link">
          高级
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../angular/observables/" title="angular" class="md-tabs__link">
          angular
        </a>
      
    </li>
  

      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    RXJS文档
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/wohugb/rxjs-docs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/rxjs-docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="前言" class="md-nav__link">
      前言
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      响应式
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        响应式
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ReactiveX/intro/" title="ReactiveX" class="md-nav__link">
      ReactiveX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ReactiveX/Observable/" title="Observable(观察体)" class="md-nav__link">
      Observable(观察体)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ReactiveX/Operators/" title="Operators(观察者)" class="md-nav__link">
      Operators(观察者)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ReactiveX/Single/" title="Single(单)" class="md-nav__link">
      Single(单)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ReactiveX/Subject/" title="Subject(主体)" class="md-nav__link">
      Subject(主体)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ReactiveX/Scheduler/" title="Scheduler(调度程序)" class="md-nav__link">
      Scheduler(调度程序)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ReactiveX/tutorials/" title="教程" class="md-nav__link">
      教程
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../introduction/" title="简介" class="md-nav__link">
      简介
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="安装" class="md-nav__link">
      安装
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      教程
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        教程
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/basics/" title="基础" class="md-nav__link">
      基础
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/applications/" title="应用" class="md-nav__link">
      应用
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      概念
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        概念
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../observable/" title="Observable(观察体)" class="md-nav__link">
      Observable(观察体)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../observer/" title="Observer(观察者)" class="md-nav__link">
      Observer(观察者)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../subscription/" title="Subscription(订阅)" class="md-nav__link">
      Subscription(订阅)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../operators/" title="Operators(操作符)" class="md-nav__link">
      Operators(操作符)
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Subject(主体)
      </label>
    
    <a href="./" title="Subject(主体)" class="md-nav__link md-nav__link--active">
      Subject(主体)
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" title="多点观察" class="md-nav__link">
    多点观察
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="参考计数" class="md-nav__link">
    参考计数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#behaviorsubject" title="BehaviorSubject" class="md-nav__link">
    BehaviorSubject
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replaysubject" title="ReplaySubject" class="md-nav__link">
    ReplaySubject
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asyncsubject" title="AsyncSubject" class="md-nav__link">
    AsyncSubject
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scheduler/" title="Scheduler(调度程序)" class="md-nav__link">
      Scheduler(调度程序)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      高级
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        高级
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../pipeable-operators/" title="Pipeable 操作符" class="md-nav__link">
      Pipeable 操作符
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rxmarbles/" title="弹珠图" class="md-nav__link">
      弹珠图
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../marble-testing/" title="编写弹珠测试" class="md-nav__link">
      编写弹珠测试
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../internal-marble-tests/" title="大理石测试" class="md-nav__link">
      大理石测试
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../operator-creation/" title="创建操作符" class="md-nav__link">
      创建操作符
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      angular
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        angular
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../angular/observables/" title="观察体" class="md-nav__link">
      观察体
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../angular/rx-library/" title="RxJS 库" class="md-nav__link">
      RxJS 库
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../angular/observables-in-angular/" title="Angular的观察体" class="md-nav__link">
      Angular的观察体
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../angular/practical-observable-usage/" title="用法实战" class="md-nav__link">
      用法实战
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../angular/comparing-observables/" title="与其它技术的比较" class="md-nav__link">
      与其它技术的比较
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../maintainer-guidelines/" title="维护者指南" class="md-nav__link">
      维护者指南
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CODE_OF_CONDUCT/" title="行为守则" class="md-nav__link">
      行为守则
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="感谢" class="md-nav__link">
      感谢
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../other/" title="扩展学习" class="md-nav__link">
      扩展学习
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" title="多点观察" class="md-nav__link">
    多点观察
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="参考计数" class="md-nav__link">
    参考计数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#behaviorsubject" title="BehaviorSubject" class="md-nav__link">
    BehaviorSubject
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replaysubject" title="ReplaySubject" class="md-nav__link">
    ReplaySubject
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asyncsubject" title="AsyncSubject" class="md-nav__link">
    AsyncSubject
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="_1">对象<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p><strong>什么是对象？</strong> An RxJS Subject is a special type of Observable that allows values to be multicasted to many Observers. While plain Observables are unicast (each subscribed Observer owns an independent execution of the Observable), Subjects are multicast.</p>
<p><span class="informal">A Subject is like an Observable, but can multicast to many Observers. Subjects are like EventEmitters: they maintain a registry of many listeners.</span></p>
<p><strong>每个主题都是可观察的。</strong> Given a Subject, you can <code>subscribe</code> to it, providing an Observer, which will start receiving values normally. From the perspective of the Observer, it cannot tell whether the Observable execution is coming from a plain unicast Observable or a Subject.</p>
<p>Internally to the Subject, <code>subscribe</code> does not invoke a new execution that delivers values. It simply registers the given Observer in a list of Observers, similarly to how <code>addListener</code> usually works in other libraries and languages.</p>
<p><strong>每个主题都是观察者。</strong> It is an object with the methods <code>next(v)</code>, <code>error(e)</code>, and <code>complete()</code>. To feed a new value to the Subject, just call <code>next(theValue)</code>, and it will be multicasted to the Observers registered to listen to the Subject.</p>
<p>In the example below, we have two Observers attached to a Subject, and we feed some values to the Subject:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Subject</span><span class="p">();</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</pre></div>

<p>With the following output on the console:</p>
<div class="codehilite"><pre><span></span><span class="n">observerA</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">2</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">2</span>
</pre></div>

<p>Since a Subject is an Observer, this also means you may provide a Subject as the argument to the <code>subscribe</code> of any Observable, like the example below shows:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Subject</span><span class="p">();</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">observable</span> <span class="o">=</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Observable</span><span class="p">.</span><span class="nx">from</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>

<span class="nx">observable</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">subject</span><span class="p">);</span> <span class="c1">// You can subscribe providing a Subject</span>
</pre></div>

<p>Which executes as:</p>
<div class="codehilite"><pre><span></span><span class="n">observerA</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">2</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">2</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">3</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">3</span>
</pre></div>

<p>With the approach above, we essentially just converted a unicast Observable execution to multicast, through the Subject. This demonstrates how Subjects are the only way of making any Observable execution be shared to multiple Observers.</p>
<p>There are also a few specializations of the <code>Subject</code> type: <code>BehaviorSubject</code>, <code>ReplaySubject</code>, and <code>AsyncSubject</code>.</p>
<h2 id="_2">多点观察<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>A "multicasted Observable" passes notifications through a Subject which may have many subscribers, whereas a plain "unicast Observable" only sends notifications to a single Observer.</p>
<p><span class="informal">A multicasted Observable uses a Subject under the hood to make multiple Observers see the same Observable execution.</span></p>
<p>Under the hood, this is how the <code>multicast</code> operator works: Observers subscribe to an underlying Subject, and the Subject subscribes to the source Observable. The following example is similar to the previous example which used <code>observable.subscribe(subject)</code>:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Observable</span><span class="p">.</span><span class="nx">from</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
<span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Subject</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">multicasted</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">multicast</span><span class="p">(</span><span class="nx">subject</span><span class="p">));</span>

<span class="c1">// These are, under the hood, `subject.subscribe({...})`:</span>
<span class="nx">multicasted</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>
<span class="nx">multicasted</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="c1">// This is, under the hood, `source.subscribe(subject)`:</span>
<span class="nx">multicasted</span><span class="p">.</span><span class="nx">connect</span><span class="p">();</span>
</pre></div>

<p><code>multicast</code> returns an Observable that looks like a normal Observable, but works like a Subject when it comes to subscribing. <code>multicast</code> returns a <code>ConnectableObservable</code>, which is simply an Observable with the <code>connect()</code> method.</p>
<p>The <code>connect()</code> method is important to determine exactly when the shared Observable execution  will start. Because <code>connect()</code> does <code>source.subscribe(subject)</code> under the hood, <code>connect()</code> returns a Subscription, which you can unsubscribe from in order to cancel the shared Observable execution.</p>
<h3 id="_3">参考计数<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>Calling <code>connect()</code> manually and handling the Subscription is often cumbersome. Usually, we want to <em>automatically</em> connect when the first Observer arrives, and automatically cancel the shared execution when the last Observer unsubscribes.</p>
<p>Consider the following example where subscriptions occur as outlined by this list:</p>
<ol>
<li>First Observer subscribes to the multicasted Observable</li>
<li><strong>The multicasted Observable is connected</strong></li>
<li>The <code>next</code> value <code>0</code> is delivered to the first Observer</li>
<li>Second Observer subscribes to the multicasted Observable</li>
<li>The <code>next</code> value <code>1</code> is delivered to the first Observer</li>
<li>The <code>next</code> value <code>1</code> is delivered to the second Observer</li>
<li>First Observer unsubscribes from the multicasted Observable</li>
<li>The <code>next</code> value <code>2</code> is delivered to the second Observer</li>
<li>Second Observer unsubscribes from the multicasted Observable</li>
<li><strong>The connection to the multicasted Observable is unsubscribed</strong></li>
</ol>
<p>To achieve that with explicit calls to <code>connect()</code>, we write the following code:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Observable</span><span class="p">.</span><span class="nx">interval</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Subject</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">multicasted</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">multicast</span><span class="p">(</span><span class="nx">subject</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">subscription1</span><span class="p">,</span> <span class="nx">subscription2</span><span class="p">,</span> <span class="nx">subscriptionConnect</span><span class="p">;</span>

<span class="nx">subscription1</span> <span class="o">=</span> <span class="nx">multicasted</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>
<span class="c1">// We should call `connect()` here, because the first</span>
<span class="c1">// subscriber to `multicasted` is interested in consuming values</span>
<span class="nx">subscriptionConnect</span> <span class="o">=</span> <span class="nx">multicasted</span><span class="p">.</span><span class="nx">connect</span><span class="p">();</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">subscription2</span> <span class="o">=</span> <span class="nx">multicasted</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
    <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
  <span class="p">});</span>
<span class="p">},</span> <span class="mi">600</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">subscription1</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
<span class="p">},</span> <span class="mi">1200</span><span class="p">);</span>

<span class="c1">// We should unsubscribe the shared Observable execution here,</span>
<span class="c1">// because `multicasted` would have no more subscribers after this</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">subscription2</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
  <span class="nx">subscriptionConnect</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span> <span class="c1">// for the shared Observable execution</span>
<span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
</pre></div>

<p>If we wish to avoid explicit calls to <code>connect()</code>, we can use ConnectableObservable's <code>refCount()</code> method (reference counting), which returns an Observable that keeps track of how many subscribers it has. When the number of subscribers increases from <code>0</code> to <code>1</code>, it will call <code>connect()</code> for us, which starts the shared execution. Only when the number of subscribers decreases from <code>1</code> to <code>0</code> will it be fully unsubscribed, stopping further execution.</p>
<p><span class="informal"><code>refCount</code> makes the multicasted Observable automatically start executing when the first subscriber arrives, and stop executing when the last subscriber leaves.</span></p>
<p>Below is an example:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Observable</span><span class="p">.</span><span class="nx">interval</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Subject</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">refCounted</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">multicast</span><span class="p">(</span><span class="nx">subject</span><span class="p">),</span> <span class="nx">refCount</span><span class="p">());</span>
<span class="kd">var</span> <span class="nx">subscription1</span><span class="p">,</span> <span class="nx">subscription2</span><span class="p">;</span>

<span class="c1">// This calls `connect()`, because</span>
<span class="c1">// it is the first subscriber to `refCounted`</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA subscribed&#39;</span><span class="p">);</span>
<span class="nx">subscription1</span> <span class="o">=</span> <span class="nx">refCounted</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB subscribed&#39;</span><span class="p">);</span>
  <span class="nx">subscription2</span> <span class="o">=</span> <span class="nx">refCounted</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
    <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
  <span class="p">});</span>
<span class="p">},</span> <span class="mi">600</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA unsubscribed&#39;</span><span class="p">);</span>
  <span class="nx">subscription1</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
<span class="p">},</span> <span class="mi">1200</span><span class="p">);</span>

<span class="c1">// This is when the shared Observable execution will stop, because</span>
<span class="c1">// `refCounted` would have no more subscribers after this</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB unsubscribed&#39;</span><span class="p">);</span>
  <span class="nx">subscription2</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
<span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
</pre></div>

<p>Which executes with the output:</p>
<div class="codehilite"><pre><span></span>observerA subscribed
observerA: 0
observerB subscribed
observerA: 1
observerB: 1
observerA unsubscribed
observerB: 2
observerB unsubscribed
</pre></div>

<p>The <code>refCount()</code> method only exists on ConnectableObservable, and it returns an <code>Observable</code>, not another ConnectableObservable.</p>
<h2 id="behaviorsubject">BehaviorSubject<a class="headerlink" href="#behaviorsubject" title="Permanent link">&para;</a></h2>
<p>One of the variants of Subjects is the <code>BehaviorSubject</code>, which has a notion of "the current value". It stores the latest value emitted to its consumers, and whenever a new Observer subscribes, it will immediately receive the "current value" from the <code>BehaviorSubject</code>.</p>
<p><span class="informal">BehaviorSubjects are useful for representing "values over time". For instance, an event stream of birthdays is a Subject, but the stream of a person's age would be a BehaviorSubject.</span></p>
<p>In the following example, the BehaviorSubject is initialized with the value <code>0</code> which the first Observer receives when it subscribes. The second Observer receives the value <code>2</code> even though it subscribed after the value <code>2</code> was sent.</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">BehaviorSubject</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// 0 is the initial value</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</pre></div>

<p>With output:</p>
<div class="codehilite"><pre><span></span><span class="n">observerA</span><span class="o">:</span> <span class="mi">0</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">2</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">2</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">3</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">3</span>
</pre></div>

<h2 id="replaysubject">ReplaySubject<a class="headerlink" href="#replaysubject" title="Permanent link">&para;</a></h2>
<p>A <code>ReplaySubject</code> is similar to a <code>BehaviorSubject</code> in that it can send old values to new subscribers, but it can also <em>record</em> a part of the Observable execution.</p>
<p><span class="informal">A <code>ReplaySubject</code> records multiple values from the Observable execution and replays them to new subscribers.</span></p>
<p>When creating a <code>ReplaySubject</code>, you can specify how many values to replay:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">ReplaySubject</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// buffer 3 values for new subscribers</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</pre></div>

<p>With output:</p>
<div class="codehilite"><pre><span></span><span class="n">observerA</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">2</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">3</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">4</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">2</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">3</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">4</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">5</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">5</span>
</pre></div>

<p>You can also specify a <em>window time</em> in milliseconds, besides of the buffer size, to determine how old the recorded values can be. In the following example we use a large buffer size of <code>100</code>, but a window time parameter of just <code>500</code> milliseconds.</p>
<!-- skip-example -->

<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">ReplaySubject</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">500</span> <span class="cm">/* windowTime */</span><span class="p">);</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">setInterval</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">i</span><span class="o">++</span><span class="p">),</span> <span class="mi">200</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
    <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
  <span class="p">});</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</pre></div>

<p>With the following output where the second Observer gets events <code>3</code>, <code>4</code> and <code>5</code> that happened in the last <code>500</code> milliseconds prior to its subscription:</p>
<div class="codehilite"><pre><span></span><span class="n">observerA</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">2</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">3</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">4</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">5</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">3</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">4</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">5</span>
<span class="n">observerA</span><span class="o">:</span> <span class="mi">6</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">6</span>
<span class="o">...</span>
</pre></div>

<h2 id="asyncsubject">AsyncSubject<a class="headerlink" href="#asyncsubject" title="Permanent link">&para;</a></h2>
<p>The AsyncSubject is a variant where only the last value of the Observable execution is sent to its observers, and only when the execution completes.</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">AsyncSubject</span><span class="p">();</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerA: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
  <span class="nx">next</span><span class="o">:</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;observerB: &#39;</span> <span class="o">+</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">subject</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="nx">subject</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
</pre></div>

<p>With output:</p>
<div class="codehilite"><pre><span></span><span class="n">observerA</span><span class="o">:</span> <span class="mi">5</span>
<span class="n">observerB</span><span class="o">:</span> <span class="mi">5</span>
</pre></div>

<p>The AsyncSubject is similar to the <a href="../../class/es6/Observable.js~Observable.html#instance-method-last"><code>last()</code></a> operator, in that it waits for the <code>complete</code> notification in order to deliver a single value.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../operators/" title="Operators(操作符)" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  后退
                </span>
                Operators(操作符)
              </span>
            </div>
          </a>
        
        
          <a href="../scheduler/" title="Scheduler(调度程序)" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  前进
                </span>
                Scheduler(调度程序)
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            版权 &copy; 2018 -  wohugb.github.io
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="http://wohugb.github.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/wohugb" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/wohugb" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/wohugb" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.8eb9be28.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../assets/javascripts/lunr/lunr.jp.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>